2025-08-10 06:07:43,580 - config - INFO - Logging configured to level 'INFO', writing to 'logs/app.log'.
2025-08-10 06:08:30,250 - config - INFO - Logging configured to level 'INFO', writing to 'logs/app.log'.
2025-08-10 06:08:30,271 - __main__ - INFO - Starting main.py directly for testing or manual execution.
2025-08-10 06:08:30,271 - __main__ - INFO - Running main pipeline with: Target Date='2025-08-10', Dry Run=True, Force Download=True
2025-08-10 06:08:30,272 - config - INFO - .env file not found at '.env'. Skipping .env load.
2025-08-10 06:08:30,275 - config - INFO - Loaded YAML configuration from 'config.yaml'.
2025-08-10 06:08:30,275 - config - INFO - Critical configuration validation successful.
2025-08-10 06:08:30,275 - config - INFO - --- Configuration Summary ---
2025-08-10 06:08:30,275 - config - INFO - Source: .env file not found or not loaded from '.env'.
2025-08-10 06:08:30,275 - config - INFO - Source: YAML file loaded from 'config.yaml'.
2025-08-10 06:08:30,275 - config - INFO - Effective critical settings (priority: YAML > Environment > Default):
2025-08-10 06:08:30,275 - config - INFO -   newspaper.url: https://example.com/newspaper/login
2025-08-10 06:08:30,275 - config - INFO -   newspaper.username: your_username
2025-08-10 06:08:30,275 - config - INFO -   newspaper.password: ********
2025-08-10 06:08:30,275 - config - INFO -   email.recipients: ['recipient1@example.com', 'recipient2@example.com']
2025-08-10 06:08:30,275 - config - INFO -   email.sender: sender@example.com
2025-08-10 06:08:30,275 - config - INFO -   email.smtp_host: smtp.example.com
2025-08-10 06:08:30,275 - config - INFO -   email.smtp_port: 587
2025-08-10 06:08:30,275 - config - INFO -   email.smtp_user: ********
2025-08-10 06:08:30,275 - config - INFO -   email.smtp_pass: ********
2025-08-10 06:08:30,275 - config - INFO -   storage.endpoint_url: https://<ACCOUNT_ID>.r2.cloudflarestorage.com
2025-08-10 06:08:30,275 - config - INFO -   storage.access_key_id: ********
2025-08-10 06:08:30,275 - config - INFO -   storage.secret_access_key: ********
2025-08-10 06:08:30,275 - config - INFO -   storage.bucket: newspaper-storage
2025-08-10 06:08:30,275 - config - INFO -   paths.download_dir: downloads
2025-08-10 06:08:30,275 - config - INFO - -----------------------------
2025-08-10 06:08:30,279 - __main__ - INFO - Processing for target date: 2025-08-10
2025-08-10 06:08:30,279 - __main__ - ERROR - Main pipeline failed: login_and_download() got an unexpected keyword argument 'username'
Traceback (most recent call last):
  File "/workspace/main.py", line 199, in main
    download_success, download_result = website.login_and_download(
                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        base_url=config.config.get(('newspaper', 'url')),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        force_download=force_download
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: login_and_download() got an unexpected keyword argument 'username'
2025-08-10 06:08:30,282 - __main__ - ERROR - main.py direct execution failed.
2025-08-10 06:08:50,957 - config - INFO - Logging configured to level 'INFO', writing to 'logs/app.log'.
2025-08-10 06:08:50,974 - __main__ - INFO - Starting main.py directly for testing or manual execution.
2025-08-10 06:08:50,974 - __main__ - INFO - Running main pipeline with: Target Date='2025-08-10', Dry Run=True, Force Download=True
2025-08-10 06:08:50,974 - config - INFO - .env file not found at '.env'. Skipping .env load.
2025-08-10 06:08:50,978 - config - INFO - Loaded YAML configuration from 'config.yaml'.
2025-08-10 06:08:50,978 - config - INFO - Critical configuration validation successful.
2025-08-10 06:08:50,978 - config - INFO - --- Configuration Summary ---
2025-08-10 06:08:50,978 - config - INFO - Source: .env file not found or not loaded from '.env'.
2025-08-10 06:08:50,978 - config - INFO - Source: YAML file loaded from 'config.yaml'.
2025-08-10 06:08:50,978 - config - INFO - Effective critical settings (priority: YAML > Environment > Default):
2025-08-10 06:08:50,978 - config - INFO -   newspaper.url: https://example.com/newspaper/login
2025-08-10 06:08:50,978 - config - INFO -   newspaper.username: your_username
2025-08-10 06:08:50,978 - config - INFO -   newspaper.password: ********
2025-08-10 06:08:50,978 - config - INFO -   email.recipients: ['recipient1@example.com', 'recipient2@example.com']
2025-08-10 06:08:50,978 - config - INFO -   email.sender: sender@example.com
2025-08-10 06:08:50,978 - config - INFO -   email.smtp_host: smtp.example.com
2025-08-10 06:08:50,978 - config - INFO -   email.smtp_port: 587
2025-08-10 06:08:50,978 - config - INFO -   email.smtp_user: ********
2025-08-10 06:08:50,978 - config - INFO -   email.smtp_pass: ********
2025-08-10 06:08:50,978 - config - INFO -   storage.endpoint_url: https://<ACCOUNT_ID>.r2.cloudflarestorage.com
2025-08-10 06:08:50,978 - config - INFO -   storage.access_key_id: ********
2025-08-10 06:08:50,978 - config - INFO -   storage.secret_access_key: ********
2025-08-10 06:08:50,978 - config - INFO -   storage.bucket: newspaper-storage
2025-08-10 06:08:50,978 - config - INFO -   paths.download_dir: downloads
2025-08-10 06:08:50,978 - config - INFO - -----------------------------
2025-08-10 06:08:50,981 - __main__ - INFO - Processing for target date: 2025-08-10
2025-08-10 06:08:50,981 - website - INFO - Downloading from: https://example.com/newspaper/login/newspaper/download/2025-08-10
2025-08-10 06:08:50,981 - website - INFO - [Dry Run] Would GET https://example.com/newspaper/login/newspaper/download/2025-08-10 and save to /workspace/downloads/2025-08-10_newspaper
2025-08-10 06:08:50,981 - __main__ - INFO - Newspaper downloaded successfully: '/workspace/downloads/2025-08-10_newspaper.pdf' (format: pdf)
2025-08-10 06:08:50,982 - __main__ - INFO - [Dry Run] Would upload '/workspace/downloads/2025-08-10_newspaper.pdf' to cloud storage as '2025-08-10_newspaper.pdf'.
2025-08-10 06:08:50,982 - __main__ - INFO - [Dry Run] Would generate thumbnail for '/workspace/downloads/2025-08-10_newspaper.pdf' at 'downloads/2025-08-10_thumbnail.jpg'.
2025-08-10 06:08:50,983 - email_sender - INFO - [Dry Run] Would send email to: ['recipient1@example.com', 'recipient2@example.com']
2025-08-10 06:08:50,983 - email_sender - INFO - Subject: Your Daily Newspaper - 2025-08-10
2025-08-10 06:08:50,983 - email_sender - INFO - Body: 
    <html>
      <body>
        <p>Good day!</p>
        <p>Your newspaper for 2025-08-10 is ready: <a href="http://dry_run_cloud_storage_url/2025-08-10_newspaper.pdf">Download</a></p>
        <p>Rec...
2025-08-10 06:08:50,983 - email_sender - INFO - [Dry Run] Would attach thumbnail reference: http://dry_run_cloud_storage_url/2025-08-10_thumbnail.jpg
2025-08-10 06:08:50,984 - __main__ - INFO - Daily newspaper processing for 2025-08-10 completed successfully.
2025-08-10 06:08:50,984 - __main__ - INFO - main.py direct execution completed successfully.
